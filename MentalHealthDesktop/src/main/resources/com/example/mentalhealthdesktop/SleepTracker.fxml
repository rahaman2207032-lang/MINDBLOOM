<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox prefHeight="700.0" prefWidth="1000.0" spacing="0" style="-fx-background-color: #f5f7fa;" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.mentalhealthdesktop.controller.SleepTrackerController">

    <!-- Header -->
    <HBox alignment="CENTER_LEFT" style="-fx-background-color: #b8a4c9; -fx-padding: 20;">
        <Label text="ðŸ˜´ Sleep Tracker" textFill="white">
            <font>
                <Font name="System Bold" size="24" />
            </font>
        </Label>
        <HBox HBox.hgrow="ALWAYS" />
        <Button fx:id="backButton" onAction="#handleBack" style="-fx-background-color: white; -fx-text-fill: #b8a4c9; -fx-font-weight: bold; -fx-cursor: hand; -fx-padding: 10 20; -fx-background-radius: 8;" text="â† Back to Dashboard" />
    </HBox>

    <!-- Main Content -->
    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
        <VBox spacing="25" style="-fx-padding: 30;">

            <!-- Statistics Cards -->
            <HBox alignment="CENTER" spacing="30">
                <VBox alignment="CENTER" spacing="10" style="-fx-background-color: white; -fx-padding: 20 40; -fx-background-radius: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                    <Label text="Average Sleep" style="-fx-font-size: 14px; -fx-text-fill: #666;" />
                    <Label fx:id="avgSleepLabel" text="0.0 hours" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #b8a4c9;" />
                </VBox>

                <VBox alignment="CENTER" spacing="10" style="-fx-background-color: white; -fx-padding: 20 40; -fx-background-radius: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                    <Label text="Total Entries" style="-fx-font-size: 14px; -fx-text-fill: #666;" />
                    <Label fx:id="totalEntriesLabel" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2196F3;" />
                </VBox>
            </HBox>

            <!-- Weekly Chart -->
            <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                <Label text="ðŸ“Š Weekly Sleep Trends" style="-fx-font-size: 18px; -fx-font-weight: bold;" />
                <BarChart fx:id="sleepChart" prefHeight="250" legendVisible="false">
                    <xAxis>
                        <CategoryAxis fx:id="xAxis" label="Date" />
                    </xAxis>
                    <yAxis>
                        <NumberAxis fx:id="yAxis" label="Hours" lowerBound="0" upperBound="12" tickUnit="2" />
                    </yAxis>
                </BarChart>
            </VBox>

            <HBox spacing="30" alignment="TOP_CENTER">

                <!-- Log Sleep Form -->
                <VBox spacing="15" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" prefWidth="450">
                    <Label text="ðŸ›Œ Log Your Sleep" style="-fx-font-size: 18px; -fx-font-weight: bold;" />

                    <VBox spacing="8">
                        <Label text="Sleep Date:" style="-fx-font-weight: bold;" />
                        <DatePicker fx:id="sleepDatePicker" prefWidth="400" />
                    </VBox>

                    <VBox spacing="8">
                        <Label text="Sleep Start Time:" style="-fx-font-weight: bold;" />
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <TextField fx:id="sleepStartHour" prefWidth="70" promptText="HH" />
                            <Label text=":" style="-fx-font-size: 18px;" />
                            <TextField fx:id="sleepStartMinute" prefWidth="70" promptText="MM" />
                            <Label text="(24-hour format)" style="-fx-text-fill: #666; -fx-font-size: 12px;" />
                        </HBox>
                    </VBox>

                    <VBox spacing="8">
                        <Label text="Wake Up Time:" style="-fx-font-weight: bold;" />
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <TextField fx:id="sleepEndHour" prefWidth="70" promptText="HH" />
                            <Label text=":" style="-fx-font-size: 18px;" />
                            <TextField fx:id="sleepEndMinute" prefWidth="70" promptText="MM" />
                            <Label text="(24-hour format)" style="-fx-text-fill: #666; -fx-font-size: 12px;" />
                        </HBox>
                    </VBox>

                    <VBox spacing="8">
                        <Label text="Sleep Quality (1-5):" style="-fx-font-weight: bold;" />
                        <ComboBox fx:id="qualityRating" prefWidth="400" />
                    </VBox>

                    <VBox spacing="8">
                        <Label text="Notes (optional):" style="-fx-font-weight: bold;" />
                        <TextArea fx:id="sleepNotes" prefRowCount="3" promptText="How did you sleep? Any dreams?" wrapText="true" />
                    </VBox>

                    <Button fx:id="saveSleepButton" onAction="#handleSaveSleep" style="-fx-background-color: #b8a4c9; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-cursor: hand; -fx-padding: 12; -fx-background-radius: 8;" text="ðŸ’¾ Save Sleep Entry" maxWidth="Infinity" />
                </VBox>

                <!-- Sleep History -->
                <VBox spacing="15" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);" prefWidth="450">
                    <Label text="ðŸ“‹ Sleep History" style="-fx-font-size: 18px; -fx-font-weight: bold;" />

                    <ScrollPane fitToWidth="true" prefHeight="500" style="-fx-background: transparent; -fx-background-color: transparent;">
                        <VBox fx:id="sleepHistoryBox" spacing="15" />
                    </ScrollPane>
                </VBox>

            </HBox>

        </VBox>
    </ScrollPane>

</VBox>




